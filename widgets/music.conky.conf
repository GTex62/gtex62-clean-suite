--[[
  ~/.config/conky/gtex62-clean-suite/widgets/music.conky.conf
  Music / now-playing widget

  • Uses theme.lua for layout/colors (theme.music).
  • Loads lua/music.lua and calls ${lua music_draw}.
  • lua/cover_line.lua injects album art placement (driven by theme.music.art_fixed).
  • External tools: playerctl (metadata/status), pactl (volume/mute), curl (cover art URLs).
]]

conky.config = {
  alignment              = 'top_left',
  background             = false,
  update_interval        = 1,
  double_buffer          = true,
  use_xft                = true,

  own_window             = true,
  own_window_type        = 'desktop',
  own_window_hints       = 'undecorated,sticky,skip_taskbar,skip_pager,below',
  own_window_argb_visual = true,
  own_window_argb_value  = 0,
  own_window_transparent = true,
  own_window_class       = 'Conky',

  -- Sandbox size: adjust later to your layout
  minimum_width          = 640,
  minimum_height         = 270,
  gap_x                  = 3845,
  gap_y                  = 530,

  -- Load our Lua
  lua_load               = '~/.config/conky/gtex62-clean-suite/lua/music.lua',
}

conky.text = [[
${if_match ${lua_parse music_visible} > 0}
  ${voffset 8}${image ~/.cache/conky/vline.png -p 118,110 -s 320x1}
  ${execp lua ~/.config/conky/gtex62-clean-suite/lua/cover_line.lua}
  ${lua music_draw}
${endif}
]]
